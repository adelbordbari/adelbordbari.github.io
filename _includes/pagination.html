{% assign pagination_data = paginator | default: page.pagination %}

{% if pagination_data and pagination_data.total_pages > 1 %}
  {% assign start_page = pagination_data.page | minus: 1 %}
  {% assign end_page = start_page | plus: 2 %}

  {% if start_page < 1 %}
    {% assign start_page = 1 %}
    {% assign end_page = 3 %}
  {% endif %}

  {% if end_page > pagination_data.total_pages %}
    {% assign end_page = pagination_data.total_pages %}
    {% assign start_page = end_page | minus: 2 %}
  {% endif %}

  {% if start_page < 1 %}
    {% assign start_page = 1 %}
  {% endif %}

  <nav class="pagination" aria-label="Pagination">
    <ul>
      {% if pagination_data.previous_page %}
        <li class="pagination-prev">
          <a href="{{ pagination_data.previous_page_path | relative_url }}" rel="prev">Prev</a>
        </li>
      {% endif %}

      {% if start_page > 1 %}
        <li>
          <a href="{{ pagination_data.first_page_path | relative_url }}">1</a>
        </li>
        <li class="pagination-ellipsis" aria-hidden="true">â€¦</li>
      {% endif %}

      {% for page_number in (start_page..end_page) %}
        {% if page_number == pagination_data.page %}
          <li class="is-current" aria-current="page">{{ page_number }}</li>
        {% else %}
          {% if page_number == 1 %}
            <li><a href="{{ pagination_data.first_page_path | relative_url }}">1</a></li>
          {% else %}
            <li>
              <a href="{{ pagination_data.paginate_path | replace: ':num', page_number | relative_url }}">
                {{ page_number }}
              </a>
            </li>
          {% endif %}
        {% endif %}
      {% endfor %}

      {% if end_page < pagination_data.total_pages %}
        <li class="pagination-ellipsis" aria-hidden="true">â€¦</li>
        <li>
          <a href="{{ pagination_data.paginate_path | replace: ':num', pagination_data.total_pages | relative_url }}">
            {{ pagination_data.total_pages }}
          </a>
        </li>
      {% endif %}

      {% if pagination_data.next_page %}
        <li class="pagination-next">
          <a href="{{ pagination_data.next_page_path | relative_url }}" rel="next">Next</a>
        </li>
      {% endif %}
    </ul>
  </nav>
{% endif %}
